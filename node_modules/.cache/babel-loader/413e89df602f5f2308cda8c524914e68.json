{"ast":null,"code":"(function (global, factory) {\n  if ('function' == typeof define && define.amd) define(['exports', 'react', 'prop-types', './styled-elements'], factory);else if ('undefined' != typeof exports) factory(exports, require('react'), require('prop-types'), require('./styled-elements'));else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.React, global.propTypes, global.styledElements), global.index = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _styledElements) {\n  'use strict';\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) throw new TypeError('Cannot call a class as a function');\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n    return call && ('object' == typeof call || 'function' == typeof call) ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if ('function' != typeof superClass && null !== superClass) throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), superClass && (Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass);\n  }\n\n  function last(arr) {\n    var pre = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : '',\n        base = 2 < arr.length ? '' + arr[arr.length - 2] : '';\n    return 0 !== base.indexOf(pre + '> ') && (base = 'bash'), base.replace(pre + '> ', '').split(' ')[0];\n  }\n\n  Object.defineProperty(exports, '__esModule', {\n    value: !0\n  });\n\n  var _class,\n      _temp2,\n      _react2 = _interopRequireDefault(_react),\n      _propTypes2 = _interopRequireDefault(_propTypes),\n      _extends = Object.assign || function (target) {\n    for (var source, i = 1; i < arguments.length; i++) {\n      for (var key in source = arguments[i], source) {\n        Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);\n      }\n    }\n\n    return target;\n  },\n      _createClass = function () {\n    function defineProperties(target, props) {\n      for (var descriptor, i = 0; i < props.length; i++) {\n        descriptor = props[i], descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, 'value' in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor;\n    };\n  }(),\n      Tabs = (_temp2 = _class = function (_Component) {\n    function Tabs() {\n      var _ref, _temp, _this, _ret;\n\n      _classCallCheck(this, Tabs);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n        showingPlus: !1\n      }, _this.handleBarClick = function (e) {\n        e.stopPropagation(), _this.props.createTab();\n      }, _this.handleTabClick = function (e, index) {\n        e.preventDefault(), e.stopPropagation(), _this.props.setActiveTab(index);\n      }, _this.handleRemoveClick = function (e, index, instance) {\n        return e.preventDefault(), e.stopPropagation(), _this.props.removeTab(index, instance.props.id), !1;\n      }, _this.removePlus = function () {\n        _this.state.showingPlus && _this.setState({\n          showingPlus: !1\n        });\n      }, _this.showPlus = function () {\n        _this.state.showingPlus || _this.setState({\n          showingPlus: !0\n        });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    return _inherits(Tabs, _Component), _createClass(Tabs, [{\n      key: 'render',\n      value: function value() {\n        var _this2 = this,\n            showingPlus = this.state.showingPlus,\n            _props = this.props,\n            style = _props.style,\n            active = _props.active,\n            tabs = this.context.instances.map(function (_ref2) {\n          var index = _ref2.index,\n              instance = _ref2.instance,\n              title = instance && instance.state ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\n          return _react2.default.createElement(_styledElements.Tab, {\n            key: index,\n            active: active === index,\n            onClick: function onClick(e) {\n              return _this2.handleTabClick(e, index);\n            },\n            onFocus: function onFocus(e) {\n              return _this2.handleTabClick(e, index);\n            },\n            title: title,\n            tabIndex: 0\n          }, 1 < _this2.context.instances.length && _react2.default.createElement(_styledElements.TabClose, {\n            title: 'Close Tab',\n            onMouseDown: function onMouseDown(e) {\n              return _this2.handleRemoveClick(e, index, instance);\n            }\n          }, 'x'), title);\n        });\n\n        return _react2.default.createElement(_styledElements.TabBar, {\n          style: _extends({}, style, this.context.maximise ? {\n            maxWidth: '100%'\n          } : {})\n        }, tabs, _react2.default.createElement(_styledElements.TabBarEmpty, {\n          onMouseEnter: this.showPlus,\n          onMouseLeave: this.removePlus\n        }, _react2.default.createElement(_styledElements.TabPlus, {\n          visible: showingPlus,\n          onClick: this.handleBarClick\n        }, '+')));\n      }\n    }]), Tabs;\n  }(_react.Component), _class.displayName = 'Tabs', _class.propTypes = {\n    style: _propTypes2.default.object,\n    active: _propTypes2.default.string,\n    setActiveTab: _propTypes2.default.func,\n    removeTab: _propTypes2.default.func,\n    createTab: _propTypes2.default.func\n  }, _class.defaultProps = {\n    style: {}\n  }, _class.contextTypes = {\n    instances: _propTypes2.default.array,\n    maximise: _propTypes2.default.bool\n  }, _temp2);\n\n  exports.default = Tabs;\n});","map":{"version":3,"sources":["../../../../src/js/components/Tabs/index.js"],"names":["pre","base","arr","Tabs","displayName","propTypes","style","active","setActiveTab","removeTab","createTab","defaultProps","contextTypes","instances","maximise","state","showingPlus","handleBarClick","e","handleTabClick","handleRemoveClick","instance","removePlus","showPlus","tabs","index","title","last","maxWidth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tab, TabBar, TabBarEmpty, TabClose, TabPlus } from './styled-elements';\n\nfunction last(arr, pre = '') {\n  let base = arr.length > 2 ? `${arr[arr.length - 2]}` : '';\n  if (base.indexOf(`${pre}> `) !== 0) {\n    base = 'bash';\n  }\n  return base.replace(`${pre}> `, '').split(' ')[0];\n}\n\nclass Tabs extends Component {\n  static displayName = 'Tabs';\n\n  static propTypes = {\n    style: PropTypes.object, // eslint-disable-line\n    active: PropTypes.string,\n    setActiveTab: PropTypes.func,\n    removeTab: PropTypes.func,\n    createTab: PropTypes.func,\n  };\n\n  static defaultProps = {\n    style: {},\n  };\n\n  static contextTypes = {\n    instances: PropTypes.array,\n    maximise: PropTypes.bool,\n  };\n\n  state = {\n    showingPlus: false,\n  };\n\n  handleBarClick = (e) => {\n    e.stopPropagation();\n    this.props.createTab();\n  };\n\n  // handle clicking a tab\n  handleTabClick = (e, index) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.setActiveTab(index);\n  };\n\n  // handle remove clicked\n  handleRemoveClick = (e, index, instance) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.removeTab(index, instance.props.id);\n    return false;\n  };\n\n  removePlus = () => {\n    if (this.state.showingPlus) {\n      this.setState({ showingPlus: false });\n    }\n  }\n\n  showPlus = () => {\n    if (!this.state.showingPlus) {\n      this.setState({ showingPlus: true });\n    }\n  }\n\n  render() {\n    const { showingPlus } = this.state;\n    const { style, active } = this.props;\n    const tabs = this.context.instances.map(({ index, instance }) => {\n      const title = (instance && instance.state) ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\n      return (\n        <Tab\n          key={index}\n          active={active === index}\n          onClick={e => this.handleTabClick(e, index)}\n          onFocus={e => this.handleTabClick(e, index)}\n          title={title}\n          tabIndex={0}\n        >\n          {this.context.instances.length > 1 && (\n            <TabClose\n              title=\"Close Tab\"\n              onMouseDown={e => this.handleRemoveClick(e, index, instance)}\n            >\n              x\n            </TabClose>\n          )}\n          {title}\n        </Tab>\n      );\n    });\n\n    return (\n      <TabBar\n        style={{\n          ...style,\n          ...(this.context.maximise ? { maxWidth: '100%' } : {}),\n        }}\n      >\n        {tabs}\n        <TabBarEmpty\n          onMouseEnter={this.showPlus}\n          onMouseLeave={this.removePlus}\n        >\n          <TabPlus\n            visible={showingPlus}\n            onClick={this.handleBarClick}\n          >+\n          </TabPlus>\n        </TabBarEmpty>\n      </TabBar>\n    );\n  }\n}\n\nexport default Tabs;\n"]},"metadata":{},"sourceType":"script"}